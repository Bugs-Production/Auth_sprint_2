# Проект 

Сервис Async API для онлайн кинотеатра.

Сервис необходим для получения информации о фильмах. Реализован поиск по названию фильма, жанру и актёру.

## Стек технологий

- FastAPI
- PostgreSQL
- Elasticsearch
- Redis
- Docker

## Запуск проекта

Клонировать репозиторий, в корневой папке (на уровне docker-compose) необходимо создать файл **.env** и заполнить переменные окружения 
по примеру файла **.env.example**
```
cp .env.example .env
```

В корневом разделе необходимо создать папку `data` и поместить в нее дамп Postgres `data_dump.sql` и схему БД `schema.sql`, для корректного создания БД и наполнения данными 
```
mkdir -p fastapi_movies/data
```

Запустить docker-compose:
```
make build
make up
```

Для остановки контейнеров 
```
make down
```

## Документация
Swagger документация находится по ручке `/api/openapi`

## Запуск тестов
Запуск тестов производится в изолированном docker-compose.test, что позволяет запускать тесты не затрагивая реальные данные

1. Собрать все необходимые сервисы для тестов
```
make build_test
```
2. Поднятие всех сервисов для авто тестов
```
make up_test
```
3. Прогон всех тестов
```
make test
```
4. Остановка тестовых сервисов
```
make down_test
```
